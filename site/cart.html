<!doctype html>
<html>
<head>
    <title>Matheus Konzen Iser - Shopping Cart</title>
    <link href="style.css" type="text/css" rel="stylesheet">
    <script src="main.js"></script>
</head>
<body>

<div id="top_header">
    <h1>Matheus Konzen Iser</h1>
</div>

<table id="cart-table">
    <tr>
        <th>Line</th>
        <th>Quantity</th>
        <th>Product Code</th>
        <th>Product Description</th>
        <th>Price Each</th>
        <th>Subtotal</th>
        <th>Actions</th>
    </tr>
    <tr class="cart-line">
        <td class="line-number">1</td>
        <td class="quantity"><input type="number" value="11"></td>
        <td class="product-code">WIDGET1234</td>
        <td class="product-description">T-Shirt: Color: Black; Size: XXL;</td>
        <td class="price-each">13</td>
        <td class="subtotal">130</td>
        <td class="remove-line"><a href="#">Remove</a></td>
    </tr>
    <tr class="cart-line">
        <td class="line-number">2</td>
        <td class="quantity"><input type="number" value="22"></td>
        <td class="product-code">WIDGET1234</td>
        <td class="product-description">T-Shirt: Color: Black; Size: XXL;</td>
        <td class="price-each">13</td>
        <td class="subtotal">130</td>
        <td class="remove-line"><a href="#">Remove</a></td>
    </tr>
    <tr class="cart-line-total">
        <td class="line-number" colspan="5" align="right">Total:</td>
        <td id="total-amount">240</td>
        <td></td>
    </tr>

</table>

<script>

    document.addEventListener("DOMContentLoaded", function () {

        var table = document.getElementById("cart-table");
        var lines = table.getElementsByClassName("cart-line");
        var line_count = lines.length;


        var getTotal = function () {
            var total = 0;

            for (var i = 0; i < line_count; i++) {
                var line = lines[i];

                var qty = line.getElementsByClassName("quantity")[0];
                var quantity = parseFloat(qty.getElementsByTagName("input")[0].value);

                var price = parseFloat(line.getElementsByClassName("price-each")[0].innerHTML);
                var subtotalElement = line.getElementsByClassName("subtotal")[0];

                var subTotal = quantity * price;
                subtotalElement.innerHTML = subTotal;
                total += subTotal;
            }
            var totalElement = document.getElementById("total-amount");
            totalElement.innerHTML = total;
        };

        for (var c = 0; c < line_count; c++) {
            var line = lines[c];
            var quantityElement = line.getElementsByTagName("input")[0];
            quantityElement.addEventListener("change", function () {
                getTotal();
            });
        }
        getTotal();
    });

</script>

</body>
</html>